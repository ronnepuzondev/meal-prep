<%- include('../partials/header') %>
<body>
    <%- include('../partials/navbar') %>
<h1>Meal Calendar</h1>

    <div class="container">
<table id="list">
  <thead>
    <tr>
      <th scope="col">Date</th>
      <th scope="col">Breakfast</th>
      <th scope="col">Lunch</th>
      <th scope="col">Dinner</th>
      <th scope="col">Snack</th>
      <th scope="col">Ingredients</th>
      <th scope="col">Edit?</th>
      <th scope="col">Delete?</th>
    </tr>
  </thead>
  <tbody>

    <% meals.forEach(function(f) { %>
    <tr>
      
      <td><b><%= f.dateOfMeal.toDateString()%></b></td>
      <td><%= f.breakfast %></td>
      <td><%= f.lunch %></td>
      <td><%= f.dinner %></td>
      <td><%= f.snack %></td>
      <td><a href="/meals/<%= f._id %>">INGREDIENTS</a></td>
      <td><a href='/meals/<%= f._id %>/edit'>EDIT MEAL</a></td>
      <td><form
          action="/meals/<%= f.id %>?_method=DELETE"
          class="delete-form"
          method="POST"
        >
          <button type="submit">X</button>
        </form></td>
    </tr>
    <% }); %>
  </tbody>
</table>

<button class="newMeal" onclick="location.href='/meals/new'" type="button">
  Add A New Meal</button>

</div>

<!-- Grocery List Code for Table Below-->



<h1>Grocery List</h1>
<h5><i>(list autopopulates from meal ingredients)</i></h5>
<% meals.forEach(function(meal) { %>
<% meal.ingredients.forEach(ingredient => { %>
  <div class="container">
   <form id="grocery-list" action="/meals/<%= ingredient.id %>/ingredients?_method=PUT"
    method="POST"
    autocomplete="off">
    <% }) %>
    
    <% }); %>

    <table class="bottom" id="table">
      <thead>
        <tr>
          <!-- <th scope="col">Ingredients Grocery List:</th> -->
        </tr>
      </thead>
        <tbody>
          <% meals.forEach(function(meal) { %>
          <tr>
            <% meal.ingredients.forEach(ingredient => { %>
             <td><div class="form-check"><input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" name="inCart">
              <label class="form-check-label" for="flexCheckDefault"><%= ingredient.name %> </label></div></td>
            <% }) %>
          </tr>
          <% }); %>
        </tbody>
        </div>
    </table>
    <input class="saveCheckmarksButton" type="submit" value="Save Checkmarks">
  </form>

      
    </div>


  


  
</body>